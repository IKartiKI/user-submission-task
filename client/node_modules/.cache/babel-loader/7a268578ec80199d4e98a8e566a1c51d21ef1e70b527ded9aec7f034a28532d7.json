{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Box,Container,Typography,Card,CardContent,Grid,ImageList,ImageListItem,CircularProgress}from'@mui/material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminDashboard=()=>{const[submissions,setSubmissions]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{const fetchSubmissions=async()=>{try{const response=await axios.get('http://localhost:5000/api/submissions');setSubmissions(response.data);setLoading(false);}catch(error){console.error('Error fetching submissions:',error);setError('Failed to load submissions');setLoading(false);}};fetchSubmissions();// Set up polling to check for new submissions every 30 seconds\nconst interval=setInterval(fetchSubmissions,30000);return()=>clearInterval(interval);},[]);if(loading){return/*#__PURE__*/_jsx(Container,{maxWidth:\"lg\",children:/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',mt:4},children:/*#__PURE__*/_jsx(CircularProgress,{})})});}if(error){return/*#__PURE__*/_jsx(Container,{maxWidth:\"lg\",children:/*#__PURE__*/_jsx(Box,{sx:{mt:4},children:/*#__PURE__*/_jsx(Typography,{color:\"error\",children:error})})});}return/*#__PURE__*/_jsx(Container,{maxWidth:\"lg\",children:/*#__PURE__*/_jsxs(Box,{sx:{mt:4,mb:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,align:\"center\",children:\"Admin Dashboard\"}),submissions.length===0?/*#__PURE__*/_jsx(Typography,{variant:\"h6\",align:\"center\",sx:{mt:4},children:\"No submissions yet\"}):/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,children:submissions.map(submission=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:submission.name}),/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:submission.socialMediaHandle}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",display:\"block\",gutterBottom:true,children:[\"Submitted: \",new Date(submission.createdAt).toLocaleString()]}),/*#__PURE__*/_jsx(ImageList,{sx:{width:'100%',height:'auto',maxHeight:400},cols:3,rowHeight:164,children:submission.images.map((image,index)=>/*#__PURE__*/_jsx(ImageListItem,{children:/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:5000/\".concat(image),alt:\"Upload \".concat(index+1,\" by \").concat(submission.name),loading:\"lazy\",style:{objectFit:'cover'}})},index))})]})})},submission._id))})]})});};export default AdminDashboard;","map":{"version":3,"names":["React","useState","useEffect","axios","Box","Container","Typography","Card","CardContent","Grid","ImageList","ImageListItem","CircularProgress","jsx","_jsx","jsxs","_jsxs","AdminDashboard","submissions","setSubmissions","loading","setLoading","error","setError","fetchSubmissions","response","get","data","console","interval","setInterval","clearInterval","maxWidth","children","sx","display","justifyContent","mt","color","mb","variant","component","gutterBottom","align","length","container","spacing","map","submission","item","xs","name","socialMediaHandle","Date","createdAt","toLocaleString","width","height","maxHeight","cols","rowHeight","images","image","index","src","concat","alt","style","objectFit","_id"],"sources":["D:/Node Projects/user-submission-system/client/src/components/AdminDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport {\r\n    Box,\r\n    Container,\r\n    Typography,\r\n    Card,\r\n    CardContent,\r\n    Grid,\r\n    ImageList,\r\n    ImageListItem,\r\n    CircularProgress\r\n} from '@mui/material';\r\n\r\nconst AdminDashboard = () => {\r\n    const [submissions, setSubmissions] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState('');\r\n\r\n    useEffect(() => {\r\n        const fetchSubmissions = async () => {\r\n            try {\r\n                const response = await axios.get('http://localhost:5000/api/submissions');\r\n                setSubmissions(response.data);\r\n                setLoading(false);\r\n            } catch (error) {\r\n                console.error('Error fetching submissions:', error);\r\n                setError('Failed to load submissions');\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchSubmissions();\r\n        // Set up polling to check for new submissions every 30 seconds\r\n        const interval = setInterval(fetchSubmissions, 30000);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    if (loading) {\r\n        return (\r\n            <Container maxWidth=\"lg\">\r\n                <Box sx={{ display: 'flex', justifyContent: 'center', mt: 4 }}>\r\n                    <CircularProgress />\r\n                </Box>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <Container maxWidth=\"lg\">\r\n                <Box sx={{ mt: 4 }}>\r\n                    <Typography color=\"error\">{error}</Typography>\r\n                </Box>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Container maxWidth=\"lg\">\r\n            <Box sx={{ mt: 4, mb: 4 }}>\r\n                <Typography variant=\"h4\" component=\"h1\" gutterBottom align=\"center\">\r\n                    Admin Dashboard\r\n                </Typography>\r\n\r\n                {submissions.length === 0 ? (\r\n                    <Typography variant=\"h6\" align=\"center\" sx={{ mt: 4 }}>\r\n                        No submissions yet\r\n                    </Typography>\r\n                ) : (\r\n                    <Grid container spacing={3}>\r\n                        {submissions.map((submission) => (\r\n                            <Grid item xs={12} key={submission._id}>\r\n                                <Card>\r\n                                    <CardContent>\r\n                                        <Typography variant=\"h6\" gutterBottom>\r\n                                            {submission.name}\r\n                                        </Typography>\r\n                                        <Typography color=\"textSecondary\" gutterBottom>\r\n                                            {submission.socialMediaHandle}\r\n                                        </Typography>\r\n                                        <Typography variant=\"caption\" display=\"block\" gutterBottom>\r\n                                            Submitted: {new Date(submission.createdAt).toLocaleString()}\r\n                                        </Typography>\r\n                                        <ImageList sx={{ width: '100%', height: 'auto', maxHeight: 400 }} cols={3} rowHeight={164}>\r\n                                            {submission.images.map((image, index) => (\r\n                                                <ImageListItem key={index}>\r\n                                                    <img\r\n                                                        src={`http://localhost:5000/${image}`}\r\n                                                        alt={`Upload ${index + 1} by ${submission.name}`}\r\n                                                        loading=\"lazy\"\r\n                                                        style={{ objectFit: 'cover' }}\r\n                                                    />\r\n                                                </ImageListItem>\r\n                                            ))}\r\n                                        </ImageList>\r\n                                    </CardContent>\r\n                                </Card>\r\n                            </Grid>\r\n                        ))}\r\n                    </Grid>\r\n                )}\r\n            </Box>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default AdminDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}